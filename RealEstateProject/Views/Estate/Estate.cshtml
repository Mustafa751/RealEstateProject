@model RealEstateProject.DAL.EstateDTO

<style>
  .carousel-container {
    position: relative;
  }

  .carousel-arrow {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    height: 30px;
    width: 30px;
    background-color: white;
    border: none;
    border-radius: 50%;
    box-shadow: 0px 0px 5px 0px rgba(0, 0, 0, 0.5);
    cursor: pointer;
  }

  .carousel-arrow:hover {
    background-color: #e6e6e6;
  }

  .carousel-arrow-left {
    left: 0;
  }

  .carousel-arrow-right {
    right: 0;
  }
</style>

<div>
    <h2>@Model.Name</h2>
    <p>
        <strong>Address:</strong> @Model.Address
    </p>
    <p>
        <strong>Description:</strong> @Model.Description
    </p>
    <p>
        <strong>City:</strong> @Model.City
    </p>
    <p>
        <strong>Estate Type:</strong> @Model.EstateType
    </p>
    <p>
        <strong>Price:</strong> @String.Format("{0:C}", Model.Price)
    </p>
    <div class="carousel-container">
        <div class="carousel-image-container">
            @foreach (var image in Model.Images)
            {
                <img src="@image.Path" class="carousel-image">
            }
        </div>
        <button class="carousel-arrow carousel-arrow-left">&#10094;</button>
        <button class="carousel-arrow carousel-arrow-right">&#10095;</button>
    </div>
</div>

<script>
    // Load all images and determine the smallest width and height
    var images = document.getElementsByClassName("carousel-image");
    var smallestWidth = images[0].width;
    var smallestHeight = images[0].height;
    for (var i = 1; i < images.length; i++) {
        if (images[i].width < smallestWidth) {
            smallestWidth = images[i].width;
        }
        if (images[i].height < smallestHeight) {
            smallestHeight = images[i].height;
        }
    }

    // Set the width and height of all images to match the smallest image
    for (var i = 0; i < images.length; i++) {
        images[i].style.width = smallestWidth + "px";
        images[i].style.height = smallestHeight + "px";
    }
</script>

<script>
    var slideIndex = 1;
    showSlides(slideIndex);

    function plusSlides(n) {
        showSlides(slideIndex += n);
    }

    function currentSlide(n) {
        showSlides(slideIndex = n);
    }

    function showSlides(n) {
        var i;
        var slides = document.getElementsByClassName("carousel-image");
        if (n > slides.length) { slideIndex = 1 }
        if (n < 1) { slideIndex = slides.length }
        for (i = 0; i < slides.length; i++) {
            slides[i].style.display = "none";
        }
        slides[slideIndex - 1].style.display = "block";
    }

    document.getElementsByClassName("carousel-arrow-left")[0].addEventListener("click", function () { plusSlides(-1) });
    document.getElementsByClassName("carousel-arrow-right")[0].addEventListener("click", function () { plusSlides(1) });
</script>

<script>
    window.onload = function() {
        var imageWidth = document.querySelector('.carousel-image').naturalWidth;
        var imageHeight = document.querySelector('.carousel-image').naturalHeight;
        var imageContainer = document.querySelector('.carousel-image-container');
        var carouselContainer = document.querySelector('.carousel-container');
        imageContainer.style.width = imageWidth + 'px';
        imageContainer.style.height = imageHeight + 'px';
        carouselContainer.style.width = imageWidth + 'px';
        carouselContainer.style.height = imageHeight + 'px';
    }
</script>